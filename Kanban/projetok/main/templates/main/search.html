{% extends 'main/base.html' %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center text-center">
        <h1 class="fs-3 mb-3">Resultados da pesquisa</h1>
        <div class="col-lg-6 col-xxl-4 mb-5">
            <h2 class="fs-4 mb-3">Projetos</h2>
            {% for projeto in projetos %}
            <div class="card bg-light border-1 mb-3">
                <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                    <h2 class="fs-4 fw-bold">{{ projeto.nome }}</h2>
                    <p class="mb-0">{{ projeto.descricao }}</p>
                    {% if user in projeto.managers.all or user in projeto.users.all %}
                    <a href="{% url 'visualizar_projeto' projeto.id %}" class="btn btn-primary rounded border border-white mt-3 pb-1">
                        Acessar
                        </a>                       
                    {% endif %}
                    {% if user in projeto.pendentes.all %}
                    <a href="{% url 'cancelar_solicitacao' projeto.id %}" class="btn btn-secondary rounded border mt-3 pb-1">Cancelar</a> 
                    {% endif %}
                    {% if user not in projeto.managers.all and user not in projeto.users.all and user not in projeto.pendentes.all %}
                    <a href="{% url 'solicitar_entrada' projeto.id %}" class="btn btn-primary rounded border border-white mt-3 pb-1" >Solicitar Entrada</a>
                    {% endif %}
                </div>
            </div>
                {% empty %}
            <h3 class="fs-5">Nenhum projeto encontrado.</h3>
        {% endfor %}
        </div>
        <div class="col-lg-6 col-xxl-4 mb-5">
            <h2 class="fs-3 mb-3">Usuarios</h2>
            {% for usuario in usuarios %}
            <div class="card border-1 mb-3">
                <div class="card-body text-center mt-3 p-4 p-lg-5 pt-0 pt-lg-0">
                    <h2 class="fs-4 fw-bold">{{ usuario.user }}</h2>
                    <a href="{% url 'perfil' %}{{ usuario.user }}" class="btn btn-primary">Ver perfil</a>
                </div>
            </div>
            {% empty %}
            <h3 class="fs-5">Nenhum usu√°rio encontrado.</h3>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}